# -*- encoding: utf-8 -*-

###################################################################################################################################################################################
## DESCRIPCIÓN:
###################################################################################################################################################################################

# Modúlo con la implementación de la clase para construir una aplicación de Qt que solo permita ejecutar una instancia a la vez (singleton).

###################################################################################################################################################################################
## AUTORES:
###################################################################################################################################################################################

# Carlos Serrada, cserradag96@gmail.com

###################################################################################################################################################################################
## DEPENDENCIAS:
###################################################################################################################################################################################

from sys import exit
from QSingleton import QSingleton
from sessionManager import sessionManager
from PyQt4.QtCore import QTimer

###################################################################################################################################################################################
## DECLARACIÓN DEL SINGLETON:
###################################################################################################################################################################################

class CEICSuiteApp(QSingleton):
    def __init__(self, argv, appID="epa2"):
        super(CEICSuiteApp, self).__init__(argv)

        self.setQuitOnLastWindowClosed(False)

    def start(self):
        self.sessionManager = sessionManager()
        self.sessionManager.splash.show()
        self.setActivationWindow(self.sessionManager)
        QTimer.singleShot(5000, lambda: self.sessionManager.splash.hide())
        QTimer.singleShot(5500, lambda: self.sessionManager.show())
        return exit(self.exec_())

###################################################################################################################################################################################
## FIN :)
##################################################################################################################################################################################